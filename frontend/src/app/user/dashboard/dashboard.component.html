<div class="dashboard-container">
  <div class="hero-section">
    <h1 class="hero-title">Discover Our Latest Arrivals</h1>
    <p class="hero-subtitle">Premium quality products curated just for you.</p>
  </div>

  <div class="navigation-toolbar" style="display: flex; gap: 10px; justify-content: center; margin: 20px 0;">
    <button mat-raised-button color="primary" routerLink="/user/cart">
      <mat-icon>shopping_cart</mat-icon> View Cart
    </button>
    <button mat-raised-button color="accent" routerLink="/user/orders">
      <mat-icon>receipt</mat-icon> Order History
    </button>
    <button mat-raised-button color="warn" routerLink="/user/watchlist">
        <mat-icon>favorite</mat-icon> My Watchlist
    </button>
    <button mat-raised-button style="background-color: #4caf50; color: white;" routerLink="/user/profile">
        <mat-icon>person</mat-icon> My Profile
    </button>
  </div>

  <!-- Search Bar -->
  <div class="search-section">
    <mat-form-field appearance="outline" class="search-input">
      <mat-label>Search Products</mat-label>
      <input matInput [(ngModel)]="searchQuery" (keyup.enter)="searchProducts()" placeholder="Laptop, Hoodie, etc.">
      <mat-icon matSuffix (click)="searchProducts()" style="cursor: pointer">search</mat-icon>
    </mat-form-field>

    <mat-form-field appearance="outline" class="price-input">
      <mat-label>Min Price</mat-label>
      <input matInput type="number" [(ngModel)]="minPrice" placeholder="0">
    </mat-form-field>

    <mat-form-field appearance="outline" class="price-input">
      <mat-label>Max Price</mat-label>
      <input matInput type="number" [(ngModel)]="maxPrice" placeholder="1000">
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="searchProducts()">Search</button>
    <button mat-button (click)="clearSearch()">Clear</button>
  </div>
  <div *ngIf="loading" class="state-container">
    <mat-spinner diameter="48"></mat-spinner>
    <p>Finding the best deals...</p>
  </div>

  <div *ngIf="error" class="state-container error">
    <mat-icon>error_outline</mat-icon>
    <p>{{ error }}</p>
    <button mat-stroked-button color="warn" (click)="ngOnInit()">Try Again</button>
  </div>

  <div class="product-grid" *ngIf="!loading && !error && products.length > 0">
    <mat-card class="product-card" *ngFor="let product of products">
      <div class="card-image-wrapper">
        <div class="product-image">
          <mat-icon>inventory_2</mat-icon>
        </div>
        <div class="badge" *ngIf="product.quantity !== undefined && product.quantity < 10 && product.quantity > 0">Limited Stock</div>
        <div class="badge out-of-stock" *ngIf="product.quantity === 0">Out of Stock</div>
      </div>
      
      <mat-card-content class="card-body">
        <div class="category">Electronics</div> <!-- Placeholder category -->
        <h3 class="product-name" (click)="viewDetails(product)">{{ product.name }}</h3>
        <p class="description">{{ product.description }}</p>
        <div class="price-row">
          <span class="price-label">Price</span>
          <span class="price-value">{{ product.retailPrice | currency }}</span>
        </div>
      </mat-card-content>

      <mat-card-actions class="card-actions">
        <button mat-button class="details-btn" (click)="viewDetails(product)">
          <mat-icon>visibility</mat-icon>
          Details
        </button>
        <button mat-raised-button color="primary" class="buy-btn" (click)="addToCart(product)" [disabled]="product.quantity === 0">
          <mat-icon>shopping_cart</mat-icon>
          Add
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div *ngIf="!loading && products.length === 0" class="state-container empty">
    <div class="empty-icon">
      <mat-icon>search_off</mat-icon>
    </div>
    <h2>No products available right now</h2>
    <p>We're restocking our shelves. Please check back later!</p>
    <button mat-flat-button color="primary" routerLink="/">Browse Catalog</button>
  </div>
</div>
